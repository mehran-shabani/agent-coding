# ایجنت کدنویسی محلی (Local Coding Agent)

یک ایجنت کدنویسی محلی و ایمن که با API های مختلف LLM کار می‌کند و به طور پیش‌فرض به GapGPT متصل است.

## ویژگی‌ها

- **کاملاً محلی**: تمام عملیات روی سیستم محلی شما انجام می‌شود
- **ایمن**: تأیید کاربر برای عملیات مخرب (حذف، بازنویسی، اعمال patch)
- **پشتیبانی از LLM های مختلف**: امکان اتصال به هر API سازگار با OpenAI
- **مدیریت TODO**: سیستم مدیریت وظایف داخلی
- **تحلیل پروژه**: تولید خودکار نقشه کد پروژه
- **مدیریت patch**: تولید و اعمال تغییرات به صورت ایمن

## نصب

```bash
pip install -e .
```

## پیکربندی

1. فایل `.env` را از `.env.example` کپی کنید:
```bash
cp .env.example .env
```

2. کلید API خود را در فایل `.env` قرار دهید:
```env
LLM_API_KEY=your_api_key_here
```

## استفاده

### دستورات اصلی

```bash
# نمایش اطلاعات پیکربندی
lca whoami

# تحلیل پروژه و تولید CODEMAP.md
lca analyze

# پرسش آزاد از LLM
lca ask "سوال شما"

# ایجاد برنامه برای دستیابی به هدف
lca plan "هدف شما"

# اجرای دستور shell
lca run "echo hello"

# تولید فایل از توضیحات
lca write --path myfile.py --from "یک اسکریپت hello world"

# ویرایش فایل
lca edit --path myfile.py --inst "یک تابع جدید اضافه کن"

# حذف فایل یا پوشه
lca delete --path myfile.py

# تولید و اعمال patch
lca patch --from "توضیحات تغییرات"
```

### مدیریت TODO

```bash
# افزودن وظیفه جدید
lca todo add "وظیفه جدید"

# نمایش لیست وظایف
lca todo list

# علامت‌گذاری وظیفه به عنوان انجام‌شده
lca todo done 1
```

## ساختار پروژه

```
.
├── agent/
│   ├── cli.py          # رابط خط فرمان اصلی
│   ├── config.py       # مدیریت پیکربندی
│   ├── llm.py          # ارتباط با LLM
│   ├── analyze.py      # تحلیل پروژه
│   ├── state.py        # مدیریت وضعیت
│   ├── prompts.py      # پرامپت های پایه
│   └── tools/
│       ├── fs.py       # عملیات فایل
│       ├── shell.py    # اجرای دستورات shell
│       └── patch.py    # مدیریت patch
├── .agent/
│   ├── logs/           # فایل‌های لاگ
│   ├── reports/        # گزارش‌های تناقض
│   └── state.json      # وضعیت ایجنت
├── pyproject.toml
├── README.md
├── .env.example
└── .gitignore
```

## امنیت

- تمام عملیات مخرب نیاز به تأیید کاربر دارند
- محتوای `.env` هرگز لاگ نمی‌شود
- تمام تغییرات قبل از اعمال نمایش داده می‌شوند
- گزارش‌گیری خودکار از تناقضات

## مجوز

MIT License